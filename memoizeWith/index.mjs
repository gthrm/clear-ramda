import { memoizeWith } from 'ramda'

/**
 * ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¸Ð· Ð´Ð¾ÐºÐ¸:
 * Ð¡Ð¾Ð·Ð´Ð°ÐµÑ‚ Ð½Ð¾Ð²ÑƒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ñ€Ð¸ Ð²Ñ‹Ð·Ð¾Ð²Ðµ ÐºÑÑˆÐ¸Ñ€ÑƒÐµÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð²Ñ‹Ð·Ð¾Ð²Ð° fn Ð´Ð»Ñ Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð½Ð°Ð±Ð¾Ñ€Ð° Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚.
 * ÐŸÐ¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð²Ñ‹Ð·Ð¾Ð²Ñ‹ Ð¼ÐµÐ¼Ð¾Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¹ fn Ñ Ñ‚ÐµÐ¼ Ð¶Ðµ Ð½Ð°Ð±Ð¾Ñ€Ð¾Ð¼ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð½Ðµ Ð¿Ñ€Ð¸Ð²ÐµÐ´ÑƒÑ‚ Ðº Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¼Ñƒ Ð²Ñ‹Ð·Ð¾Ð²Ñƒ fn; Ð²Ð¼ÐµÑÑ‚Ð¾ ÑÑ‚Ð¾Ð³Ð¾ Ð±ÑƒÐ´ÐµÑ‚ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰ÐµÐ½ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð½Ð°Ð±Ð¾Ñ€Ð° Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð².
 */

/**
  * Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¼ÐµÐ¼Ð¾Ð¸Ð·Ð°Ñ†Ð¸Ð¸
  * @param {number} value - Ñ‡Ð¸ÑÐ»Ð¾ (Ð¿Ñ€Ð¸Ð¼ÐµÑ‚Ð¸Ð²)
  */
export const fn = (value) => {
  const result = value * 2
  console.log(`ðŸ’ª Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ fn(${value}) => `, result)
  return result
}

/**
  * ÐŸÑ€Ð¸Ð¼ÐµÑ€ memoFn() Ð²Ñ‹Ð²ÐµÐ´ÐµÑ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐµ:
  * ðŸ“º --- memoFn()
  * ðŸ’ª Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ fn(4) =>  8
  * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn(4):  8
  * ðŸ’ª Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ fn(5) =>  10
  * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn(5):  10
  * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn(4):  8
  * ---
  */
export const memoFn = memoizeWith((value) => value, fn)

console.log('ðŸ“º --- memoFn()')
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn(4) => ', memoFn(4))
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn(5) => ', memoFn(5))
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn(4) => ', memoFn(4))
console.log('---')
console.log(' ')

// *****
// ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ:
// Ð˜Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾ Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ð² Ð´Ð¾ÐºÐµ Ð½Ðµ ÑÐºÐ°Ð·Ð°Ð½Ð¾, Ñ‡Ñ‚Ð¾ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ Ð² memoizeWith Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÐµÐ¹, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ñ
// ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ (key) => key Ð¸Ð»Ð¸ R.identity
// *****

/**
 * Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¼ÐµÐ¼Ð¾Ð¸Ð·Ð°Ñ†Ð¸Ð¸
 * @param {Object} obj - Ð¾Ð±ÑŠÐµÐºÑ‚ (Ð½Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ‚Ð¸Ð²)
 */
export const fn2 = (obj) => {
  const resultObj = Object.assign({}, obj)
  resultObj.key *= 2
  console.log(`ðŸ’ª Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ fn2(${JSON.stringify(obj)}) => `, resultObj)
  return resultObj
}

// *****
// ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ:
// Ð•ÑÐ»Ð¸ Ð² Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ Ð¼ÐµÐ¼Ð¾Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ Ð¾Ð±ÑŠÐµÐºÑ‚, Ñ‚Ð¾ ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ (key) => key Ð¸Ð»Ð¸ R.identity Ð½Ðµ ÑÑ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚,
// Ñ‚Ð°Ðº ÐºÐ°Ðº key Ð¿Ñ€Ð¸Ð²ÐµÐ´ÐµÑ‚ÑÑ Ðº ÑÑ‚Ñ€Ð¾ÐºÐµ Ð¸ Ð¼Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð¼ [object Object].
// Ð Ñ‚Ð°Ðº ÐºÐ°Ðº Ð¾Ñ‚ Ð»ÑŽÐ±Ð¾Ð³Ð¾ Object.toString() Ð¼Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð¼ [object Object], Ñ‚Ð¾ Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¼ÐµÐ¼Ð¾Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð½Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¾.
// ÐžÐ½Ð° ÐºÑÑˆÐ¸Ñ€ÑƒÐµÑ‚ Ð¿ÐµÑ€Ð²Ð¾Ðµ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¸ Ð±ÑƒÐ´ÐµÑ‚ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ ÐµÐ³Ð¾ Ð½Ð° Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð²Ñ‹Ð·Ð¾Ð²Ñ‹ Ñ Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼Ð¸ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°Ð¼Ð¸ Ð² ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð°
// *****

/**
 * ÐŸÑ€Ð¸Ð¼ÐµÑ€ memoFn2 Ð²Ñ‹Ð²ÐµÐ´ÐµÑ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐµ:
 * ðŸ“º --- memoFn2()
 * ðŸ’ª Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ fn2({"key":6}) =>  { key: 12 }
 * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ fn2({ key: 6 }) =>  { key: 12 }
 * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ fn2({ key: 5 }) =>  { key: 12 } - ÐÐ• Ð¡Ð ÐÐ‘ÐžÐ¢ÐÐ›Ðž
 * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ fn2({ key: 6 }) =>  { key: 12 }
 * ---
 */
export const memoFn2 = memoizeWith((value) => value, fn2)

console.log('ðŸ“º --- memoFn2()')
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ fn2({ key: 6 }) => ', memoFn2({ key: 6 }))
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ fn2({ key: 5 }) => ', memoFn2({ key: 5 }))
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ fn2({ key: 6 }) => ', memoFn2({ key: 6 }))
console.log('---')
console.log(' ')

// *****
// ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ:
// Ð•ÑÐ»Ð¸ Ð¿ÐµÑ€Ð²Ñ‹Ð¼ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð¼ Ð´Ð»Ñ memoizeWith Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð²Ñ€Ð¾Ð´Ðµ (obj) => obj.key, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ð»Ð° Ð¿Ñ€Ð¸Ð¼ÐµÑ‚Ð¸Ð²,
// Ñ‚Ð¾ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒÑÑ, Ñ‡Ñ‚Ð¾ Ð²ÑÑ‘ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚, Ð½Ð¾ ÐµÑÐ»Ð¸ Ð² Ð¾Ð±ÑŠÐµÐºÑ‚Ðµ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑÑ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ ÐºÑ€Ð¾Ð¼Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ key,
// Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð½Ðµ Ð¿ÐµÑ€ÐµÐ²Ñ‹Ñ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑÑ Ð¸ Ð±ÑƒÐ´ÐµÑ‚ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚
// ÐÐÐŸÐ Ð˜ÐœÐ•Ð : Ð½Ð¸Ð¶Ðµ
// *****

/**
 * ÐŸÑ€Ð¸Ð¼ÐµÑ€ memoFn2D1 Ð²Ñ‹Ð²ÐµÐ´ÐµÑ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐµ:
 * ðŸ“º --- memoFn2D1()
 * ðŸ’ª Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ fn2({"key":6}) =>  { key: 12 }
 * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D1({ key: 6 }) =>  { key: 12 }
 * ðŸ’ª Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ fn2({"key":5}) =>  { key: 10 }
 * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D1({ key: 5 }) =>  { key: 10 }
 * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D1({ key: 6 }) =>  { key: 12 }
 * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D1({ key: 6, key2: 5 }) =>  { key: 12 }  - ÐÐ• Ð¡Ð ÐÐ‘ÐžÐ¢ÐÐ›Ðž
 * ---
 */
export const memoFn2D1 = memoizeWith((obj) => obj.key, fn2)

console.log('ðŸ“º --- memoFn2D1()')
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D1({ key: 6 }) => ', memoFn2D1({ key: 6 }))
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D1({ key: 5 }) => ', memoFn2D1({ key: 5 }))
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D1({ key: 6 }) => ', memoFn2D1({ key: 6 }))
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D1({ key: 6, key2: 5 }) => ', memoFn2D1({ key: 6, key2: 5 }))
console.log('---')
console.log(' ')

// *****
// ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ:
// memoFn2D1({ key: 6, key2: 5 }) Ð²ÐµÑ€Ð½ÑƒÐ»Ð° { key: 12 }, Ñ‚Ð°Ðº ÐºÐ°Ðº Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ memoFn2D1 Ð¼ÐµÐ¼Ð¾Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ ÐºÐ»ÑŽÑ‡Ð° key
// Ð§Ñ‚Ð¾Ð±Ñ‹ Ð¼ÐµÐ¼Ð¾Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°, Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ñ€Ð¸Ð²ÐµÑÑ‚Ð¸ Ð¾Ð±ÑŠÐµÐºÑ‚ Ð² ÑÑ‚Ñ€Ð¾ÐºÑƒ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ JSON.stringify Ð¸Ð»Ð¸ R.toString
// *****

/**
 * ÐŸÑ€Ð¸Ð¼ÐµÑ€ memoFn2D2 ÑÑ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾:
 * ðŸ“º --- memoFn2D2()
 * ðŸ’ª Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ fn2({"key":6}) =>  { key: 12 }
 * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D2({ key: 6 }) =>  { key: 12 }
 * ðŸ’ª Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ fn2({"key":5}) =>  { key: 10 }
 * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D2({ key: 5 }) =>  { key: 10 }
 * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D2({ key: 6 }) =>  { key: 12 }
 * ðŸ’ª Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ fn2({"key":6,"key2":5}) =>  { key: 12, key2: 5 }
 * Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D1({ key: 6, key2: 5 }) =>  { key: 12, key2: 5 }
 * ---
 */
export const memoFn2D2 = memoizeWith((obj) => JSON.stringify(obj), fn2)

console.log('ðŸ“º --- memoFn2D2()')
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D2({ key: 6 }) => ', memoFn2D2({ key: 6 }))
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D2({ key: 5 }) => ', memoFn2D2({ key: 5 }))
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D2({ key: 6 }) => ', memoFn2D2({ key: 6 }))
console.log('Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ memoFn2D1({ key: 6, key2: 5 }) => ', memoFn2D2({ key: 6, key2: 5 }))
console.log('---')
console.log(' ')
